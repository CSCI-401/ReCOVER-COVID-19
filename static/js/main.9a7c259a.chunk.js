(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{1028:function(e,a,t){},1043:function(e,a,t){"use strict";t.r(a);var r=t(1),n=t.n(r),i=t(41),o=t.n(i),s=(t(642),t(40)),c=t(39),l=t(62),u=t(61),d=(t(274),t(94)),h=(t(430),t(343)),m=(t(431),t(96)),p=(t(646),t(574)),f=(t(276),t(101)),v=(t(648),t(179)),g=(t(432),t(340)),y=(t(433),t(139)),b=(t(434),t(341)),S=(t(356),t(174)),k=t(157),E=t(121),D=t(136),C=t(50),w=(t(357),t(108)),O=t(70),j=t(322),_=t(137),M=t.n(_),A=t(194),I=t.n(A),x=t(45);var N=function(e){var a=e.series,t=e.lineGenerator,r=e.xScale,i=e.yScale;return a.map((function(e){var a=e.id,o=e.data,s=e.color,c=e.predicted,l=e.distancing,u={strokeWidth:3};return c&&(u.strokeDasharray=l?"6, 4":"2, 6"),n.a.createElement("path",{key:a,d:t(o.map((function(e){return{x:r(e.data.x),y:i(e.data.y)}}))),fill:"none",stroke:s,style:u})}))},R={axis:{ticks:{text:{fontSize:18}},legend:{text:{fontSize:18}}},legends:{text:{fontSize:18}}},T=function(e){Object(l.a)(t,e);var a=Object(u.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"parseDate",value:function(e){var a=e.split("-").map(Number),t=Object(O.a)(a,3),r=t[0],n=t[1],i=t[2];return new Date(r,n-=1,i)}},{key:"getCumulativeData",value:function(e){var a=this;return e.map((function(e){return{x:a.parseDate(e.date),y:e.value}}))}},{key:"getDeltaData",value:function(e,a){var t=this;return e.map((function(r,n){return 0===n?{x:t.parseDate(r.date),y:r.value-a}:{x:t.parseDate(r.date),y:r.value-e[n-1].value}}))}},{key:"processData",value:function(e,a){var t=a.statistic,r=a.yScale,n=a.initialVal,i="delta"===t?this.getDeltaData(e,n):this.getCumulativeData(e);return"log"===r&&(i=i.filter((function(e){e.x;return e.y>0}))),i}},{key:"getDataMax",value:function(){var e=this.props.data,a=0;return Object.keys(e).forEach((function(t){var r=e[t],n=r.observed,i=r.predictions;a=Math.max(a,Math.max.apply(Math,Object(D.a)(n.map((function(e){return e.value}))))),i.forEach((function(e){var t=e.time_series;a=Math.max(a,Math.max.apply(Math,Object(D.a)(t.map((function(e){return e.value})))))}))})),a}},{key:"getYAxisProps",value:function(){for(var e=this.props,a=e.statistic,t=e.yScale,r={format:function(e){return I()(e).format("0.[0]a")},orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:"delta"===a?"New Cases":"Cumulative Cases",legendOffset:-60,legendPosition:"middle"},n=[],i=0;i<=Math.ceil(Math.log10(this.getDataMax()));i++)n.push(Math.pow(10,i));var o=Object(E.a)({},r,{tickValues:n});return"log"===t?{axisLeft:o,gridYValues:n,yScale:{type:"log",base:10,min:Math.min.apply(Math,n),max:Math.max.apply(Math,n)}}:{axisLeft:r,yScale:{type:"linear",min:"auto",max:"auto"}}}},{key:"render",value:function(){var e=this,a=this.props.data,t=this.props,r=t.statistic,i=t.yScale,o=t.dataType,s=[],c=[];Object.keys(a).sort().forEach((function(t,n){var l=function(e){var a=[x.red,x.gold,x.green,x.blue,x.volcano,x.yellow,x.cyan,x.purple,x.organge,x.lime,x.geekblue,x.magenta];return a[e%a.length]}(n),u=a[t].observed,d=a[t].observed_deaths;o.includes("confirmed")&&(s.push({id:t,data:e.processData(u,{statistic:r,yScale:i,initialVal:0}),predicted:!1}),c.push(l[4])),o.includes("death")&&(s.push({id:"".concat(t," death"),data:e.processData(d,{statistic:r,yScale:i,initialVal:0}),predicted:!1}),c.push(l[6])),a[t].predictions.filter((function(e){return e.time_series.length>0})).forEach((function(a,n){var h=a.model.name,m="SI-kJalpha"!==h.substring(0,10)||h.includes("death prediction"),p=a.distancing,f=a.time_series,v=[];if(o.includes("death")&&m)v=[d[d.length-1]].concat(f);else{if(!o.includes("confirmed")||m)return;v=[u[u.length-1]].concat(f)}s.push({id:"".concat(t," (").concat(h,", distancing=").concat(p,")"),data:e.processData(v,{statistic:r,yScale:i,initialVal:m?d[d.length-2].value:u[u.length-2].value}),predicted:!0,distancing:p}),n<=4?c.push(l[4+n]):n<=8?c.push(l[8-n]):c.push(l[n%10])}))}));var l="every week";if(s.length>0){var u=s[0].data[0].x,d=s[0].data[0].x;s.forEach((function(e){e.data.forEach((function(e){var a=e.x;u=Math.min(u,a),d=Math.max(d,a)}))})),u=M()(u),(d=M()(d)).diff(u,"days")>150&&(l="every month")}return n.a.createElement(j.a,Object.assign({data:s,colors:c,margin:{top:10,right:50,bottom:70,left:100},xScale:{type:"time",format:"native",precision:"day"},axisBottom:{tickValues:l,format:function(e){return M()(e).format("M/D")},orient:"bottom",tickSize:5,tickPadding:5,tickRotation:0,legend:"Date",legendOffset:36,legendPosition:"middle"}},this.getYAxisProps(),{enableSlices:"x",sliceTooltip:function(e){var a=e.slice;return n.a.createElement("div",{style:{background:"white",padding:"9px 12px",border:"1px solid #ccc"}},n.a.createElement("div",null,M()(a.points[0].data.x).format("MMM Do YYYY")),a.points.map((function(e){return n.a.createElement("div",{key:e.id,style:{color:e.serieColor,padding:"3px 0"}},n.a.createElement("strong",null,e.serieId),"[",I()(e.data.yFormatted).format("0.[0]a"),"]")})))},pointSize:0,pointLabel:"y",pointLabelYOffset:-12,legends:[{anchor:"top-left",direction:"column",justify:!1,translateX:0,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}],layers:["grid","markers","areas","crosshair",N,"slices","points","axes","legends"],theme:R}))}}]),t}(r.Component),V=t(85),P=t.n(V),L="https://dslab-covid19-backend.herokuapp.com/api",G=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,[{key:"affected_by",value:function(e){}},{key:"areas",value:function(e){var a="".concat(L,"/areas");P.a.get(a).then((function(a){var t=a.data;e(t)}))}},{key:"models",value:function(e){var a="".concat(L,"/models");P.a.get(a).then((function(a){var t=a.data;e(t)}))}},{key:"infection_models",value:function(e){var a="".concat(L,"/infection_models");P.a.get(a).then((function(a){var t=a.data;e(t)}))}},{key:"death_models",value:function(e){var a="".concat(L,"/death_models");P.a.get(a).then((function(a){var t=a.data;e(t)}))}},{key:"cumulative_infections",value:function(e){var a="".concat(L,"/cumulative_infections");P.a.get(a).then((function(a){return e(a.data)}))}},{key:"predict_all",value:function(e,a){var t="".concat(L,"/predict_all");P.a.get(t,{params:e}).then((function(e){return a(e.data)}))}},{key:"predict",value:function(e,a){var t="".concat(L,"/predict");P.a.get(t,{params:e}).then((function(e){a(e.data)}))}},{key:"getCurrentDate",value:function(e){var a="".concat(L,"/current_date");P.a.get(a).then((function(a){var t=a.data;e(t)}))}},{key:"checkHistory",value:function(e,a){var t="".concat(L,"/check_history");P.a.get(t,{params:e}).then((function(e){a(e.data)}))}},{key:"history_cumulative",value:function(e,a){var t="".concat(L,"/history_cumulative");P.a.get(t,{params:e}).then((function(e){a(e.data)}))}},{key:"scores_all",value:function(e,a){var t="".concat(L,"/scores_all");P.a.get(t,{params:e}).then((function(e){a(e.data)}))}},{key:"scores",value:function(e,a){var t="".concat(L,"/scores");P.a.get(t,{params:e}).then((function(e){a(e.data)}))}},{key:"latest_score_date",value:function(e){var a="".concat(L,"/latest_score_date");P.a.get(a).then((function(a){var t=a.data;e(t)}))}},{key:"cumulative_death",value:function(e,a){var t="".concat(L,"/cumulative_death");P.a.get(t,{params:e}).then((function(e){a(e.data)}))}},{key:"all_mrf_scores",value:function(e,a){var t="".concat(L,"/all_mrf_scores");P.a.get(t,{params:e}).then((function(e){a(e.data)}))}}]),e}();function W(e){return"".concat(e.country).concat(e.state?" / "+e.state:"")}function B(e){var a=e.split("/");return{country:a[0].trim(),state:2===a.length?a[1].trim():""}}var F=t(53),U=t(88),H=t(329),z=t(330),Y=t(544),J=t(545),q=t(546),K=t(344);F.e(K.a);var X=function(e){Object(l.a)(t,e);var a=Object(u.a)(t);function t(){var e;return Object(s.a)(this,t),(e=a.call(this)).onShowState=function(a){e.setState({showState:a})},e.modelAPI=new G,e.state={areasList:[],showState:!1,worldSeries:{},usaSeries:{},chinaSeries:{},canadaSeries:{},austriliaSeries:{}},e.modelAPI.areas((function(a){return e.setState({areasList:a})})),e}return Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.triggerRef(this),this.fetchData(this.props.dynamicMapOn)}},{key:"fetchData",value:function(e){var a=this;!e||""===this.props.confirmed_model&&""===this.props.death_model?"confirmed"===this.props.dataType?this.modelAPI.cumulative_infections((function(e){var t=e.map((function(e){return{id:e.area.iso_2,value:e.value>0?Math.log(e.value):0,valueTrue:e.value,area:e.area}}));a.setState({heatmapData:t},a.initChart)})):this.modelAPI.cumulative_death({days:0},(function(e){var t=e.map((function(e){return{id:e.area.iso_2,value:e.value>0?Math.log(e.value):0,valueTrue:e.value,area:e.area}}));a.setState({heatmapData:t},a.resetChart)})):"cumulative"===this.props.statistic?this.props.days>0?this.modelAPI.predict_all({days:this.props.days,model:"confirmed"===this.props.dataType?this.props.confirmed_model:this.props.death_model},(function(e){var t=e.map((function(e){return{id:e.area.iso_2,value:e.value>0?Math.log(e.value):0,valueTrue:e.value,area:e.area}}));a.setState({heatmapData:t},a.resetChart)})):this.modelAPI.history_cumulative({days:this.props.days},(function(e){var t=e.map((function(e){return"confirmed"===a.props.dataType?{id:e.area.iso_2,value:e.value>0?Math.log(e.value):0,valueTrue:e.value,area:e.area}:{id:e.area.iso_2,value:e.deathValue>0?Math.log(e.deathValue):0,valueTrue:e.deathValue,area:e.area}}));a.setState({heatmapData:t},a.resetChart)})):this.props.days>0?this.modelAPI.predict_all({days:this.props.days,model:"confirmed"===this.props.dataType?this.props.confirmed_model:this.props.death_model},(function(e){a.props.days>7?a.modelAPI.predict_all({days:a.props.days-7,model:"confirmed"===a.props.dataType?a.props.confirmed_model:a.props.death_model},(function(t){var r=e.map((function(e,a){return{id:e.area.iso_2,value:e.value-t[a].value>0?Math.log(e.value-t[a].value):0,valueTrue:e.value-t[a].value>0?e.value-t[a].value:0,area:e.area}}));a.setState({heatmapData:r},a.resetChart)})):a.modelAPI.history_cumulative({days:a.props.days-7},(function(t){var r=e.map((function(e,r){return"confirmed"===a.props.dataType?{id:e.area.iso_2,value:e.value-t.find((function(a){return a.area.iso_2===e.area.iso_2})).value>0?Math.log(e.value-t.find((function(a){return a.area.iso_2===e.area.iso_2})).value):0,valueTrue:e.value-t.find((function(a){return a.area.iso_2===e.area.iso_2})).value>0?e.value-t.find((function(a){return a.area.iso_2===e.area.iso_2})).value:0,area:e.area}:{id:e.area.iso_2,value:e.deathValue-t.find((function(a){return a.area.iso_2===e.area.iso_2})).deathValue>0?Math.log(e.deathValue-t.find((function(a){return a.area.iso_2===e.area.iso_2})).deathValue):0,valueTrue:e.deathValue-t.find((function(a){return a.area.iso_2===e.area.iso_2})).deathValue>0?e.deathValue-t.find((function(a){return a.area.iso_2===e.area.iso_2})).deathValue:0,area:e.area}}));a.setState({heatmapData:r},a.resetChart)}))})):this.modelAPI.history_cumulative({days:this.props.days},(function(e){a.modelAPI.history_cumulative({days:a.props.days-7},(function(t){var r=e.map((function(e,r){return"confirmed"===a.props.dataType?{id:e.area.iso_2,value:e.value-t[r].value>0?Math.log(e.value-t[r].value):0,valueTrue:e.value-t[r].value>0?e.value-t[r].value:0,area:e.area}:{id:e.area.iso_2,value:e.deathValue-t[r].deathValue>0?Math.log(e.deathValue-t[r].deathValue):0,valueTrue:e.deathValue-t[r].deathValue>0?e.deathValue-t[r].deathValue:0,area:e.area}}));a.setState({heatmapData:r},a.resetChart)}))}))}},{key:"initChart",value:function(){this.chart=F.d("chartdiv",U.a),this.chart.projection=new U.d.Mercator;var e=this.chart.series.push(new U.b);e=this.createChartSeries(e,{geodata:H.a,exclude:["AQ"],data:this.state.heatmapData});var a=this.chart.series.push(new U.b);a=this.createChartSeries(a,{geodata:Y.a,data:this.state.heatmapData,disabled:!this.state.showState});var t=this.chart.series.push(new U.b);t=this.createChartSeries(t,{geodata:z.a,data:this.state.heatmapData,disabled:!this.state.showState});var r=this.chart.series.push(new U.b);r=this.createChartSeries(r,{geodata:J.a,data:this.state.heatmapData,disabled:!this.state.showState});var n=this.chart.series.push(new U.b);n=this.createChartSeries(n,{geodata:q.a,data:this.state.heatmapData,disabled:!this.state.showState}),this.stateSeries=[t],this.initChartInterface(),this.setState({worldSeries:e,chinaSeries:a,usaSeries:t,canadaSeries:r,australiaSeries:n})}},{key:"createChartSeries",value:function(e,a){var t=this.props.statistic,r=(e=Object.assign(e,a)).mapPolygons.template;"cumulative"===t?e.heatRules.push({property:"fill",target:r,min:F.c("#fcbba0"),max:F.c("#66000d"),minValue:0,maxValue:Math.log(5e6)}):e.heatRules.push({property:"fill",target:r,min:F.c("#fcbba0"),max:F.c("#66000d"),minValue:0,maxValue:Math.log(1e6)}),r.tooltipText="{name}: {valueTrue}",r.nonScalingStroke=!0,r.strokeWidth=.5,r.states.create("hover").properties.fill=F.c("#e43027"),r.cursorOverStyle=F.b.pointer;var n=this.props,i=n.onMapClick,o=n.onNoData;return r.events.on("hit",(function(e){var a=e.target.dataItem.dataContext,t=(a.id,a.value,a.area),r=a.name;t?i(t):o(r)})),e}},{key:"initChartInterface",value:function(){var e=this,a=this.state.showState;this.chart.zoomControl=new U.c,this.chart.zoomControl.cursorOverStyle=F.b.pointer;var t=this.chart.chartContainer.createChild(F.a);t.label.text="".concat(a?"Hide":"Show"," States/Provinces"),t.togglable=!0,t.padding(5,5,5,5),t.align="right",t.marginRight=15,t.cursorOverStyle=F.b.pointer,t.events.on("hit",(function(){e.onShowState(t.isActive);var a=e.state.showState;e.stateSeries.forEach((function(e){e.disabled=!a})),t.label.text="".concat(a?"Hide":"Show"," States/Provinces")}))}},{key:"resetChart",value:function(){var e=this.state.worldSeries,a=this.state.usaSeries,t=this.state.chinaSeries,r=this.state.canadaSeries,n=this.state.austriliaSeries;e.data=this.state.heatmapData,a.data=this.state.heatmapData,r.data=this.state.heatmapData,t.data=this.state.heatmapData,n.data=this.state.heatmapData}},{key:"componentWillUnmount",value:function(){this.chart&&this.chart.dispose()}},{key:"render",value:function(){return n.a.createElement("div",{id:"chartdiv"})}}]),t}(r.Component),Q=(t(795),w.a.Option),$=function(e){Object(l.a)(t,e);var a=Object(u.a)(t);function t(e){var r;return Object(s.a)(this,t),(r=a.call(this,e)).handleYScaleSelect=function(e){r.setState({yScale:e.target.value})},r.handleStatisticSelect=function(e){r.setState({statistic:e.target.value})},r.handleDataTypeSelect=function(e){r.setState({dataType:e})},r.handleMapShownSelect=function(e){r.setState({mapShown:e.target.value},(function(){r.map.fetchData(r.state.dynamicMapOn)}))},r.componentWillMount=function(){r.addAreaByStr("US"),r.formRef=n.a.createRef(),r.modelAPI=new G,r.modelAPI.areas((function(e){return r.setState({areasList:e})})),r.modelAPI.infection_models((function(e){return r.setState({modelsList:e},(function(){r.modelAPI.death_models((function(e){for(var a=function(a){r.setState((function(t){return{modelsList:[].concat(Object(D.a)(t.modelsList),[e[a]])}}))},t=6;t<e.length;++t)a(t)}))}))})),r.modelAPI.getCurrentDate((function(e){return r.setState({currentDate:e[0].date,firstDate:e[0].firstDate})}))},r.bindRef=function(e){r.map=e},r.onAlertClose=function(){r.setState({noDataError:!1})},r.onNoData=function(e){r.setState({noDataError:!0,errorDescription:"There is currently no data for ".concat(e)})},r.generateMarks=function(){var e=r.state,a=e.currentDate,t=e.days,n=e.firstDate,i=new Date("".concat(a,"T00:00")),o=new Date("".concat(n,"T00:00"));i.setDate(i.getDate(Date)+t);var s={};s[t]="".concat(i.getMonth()+1,"/").concat(i.getDate());for(var c=t+7;c<t+50&&c<=99;)i.setDate(i.getDate()+7),s[c]="".concat(i.getMonth()+1,"/").concat(i.getDate()),c+=7;for((i=new Date("".concat(a,"T00:00"))).setDate(i.getDate(Date)+t),i.setDate(i.getDate()-7),c=t-7;i>=o&&c>t-30;)s[c]="".concat(i.getMonth()+1,"/").concat(i.getDate()),i.setDate(i.getDate()-7),c-=7;return s},r.getDaysToFirstDate=function(){var e=r.state,a=e.currentDate,t=e.firstDate,n=new Date("".concat(a,"T00:00")),i=new Date("".concat(t,"T00:00"));return Math.ceil(Math.abs(n-i)/864e5)},r.state={areas:r.props.areas||[],areasList:[],models:r.props.models||["SI-kJalpha - 20x under-reported positive cases"],modelsList:[],currentDate:"",firstDate:"",current:!0,worst_effort:!1,best_effort:!1,mainGraphData:{},days:14,dynamicMapOn:!1,dataType:["confirmed"],statistic:"cumulative",mapShown:"confirmed",yScale:"linear",noDataError:!1,errorDescription:""},r.addAreaByStr=r.addAreaByStr.bind(Object(C.a)(r)),r.removeAreaByStr=r.removeAreaByStr.bind(Object(C.a)(r)),r.onValuesChange=r.onValuesChange.bind(Object(C.a)(r)),r.onMapClick=r.onMapClick.bind(Object(C.a)(r)),r.onDaysToPredictChange=r.onDaysToPredictChange.bind(Object(C.a)(r)),r.switchDynamicMap=r.switchDynamicMap.bind(Object(C.a)(r)),r.onAlertClose=r.onAlertClose.bind(Object(C.a)(r)),r.onNoData=r.onNoData.bind(Object(C.a)(r)),r.generateMarks=r.generateMarks.bind(Object(C.a)(r)),r.handleDataTypeSelect=r.handleDataTypeSelect.bind(Object(C.a)(r)),r.handleStatisticSelect=r.handleStatisticSelect.bind(Object(C.a)(r)),r.handleYScaleSelect=r.handleYScaleSelect.bind(Object(C.a)(r)),r}return Object(c.a)(t,[{key:"onMapClick",value:function(e){this.areaIsSelected(e)||this.addAreaByStr(W(e))}},{key:"areaIsSelected",value:function(e){if(this.state.areas&&e){var a=W(e);return this.state.areas.includes(a)}return!1}},{key:"addAreaByStr",value:function(e){var a=this,t=B(e);this.setState((function(a){return{areas:[].concat(Object(D.a)(a.areas),[e])}}),(function(){a.state.days>=0?a.modelAPI.predict({state:t.state,country:t.country,models:a.state.models,days:a.state.days,current:a.state.current,worst_effort:a.state.worst_effort,best_effort:a.state.best_effort},(function(t){a.setState((function(a){return{mainGraphData:Object(E.a)({},a.mainGraphData,Object(k.a)({},e,t))}}))})):a.modelAPI.checkHistory({state:t.state,country:t.country,days:a.state.days},(function(t){a.setState((function(a){return{mainGraphData:Object(E.a)({},a.mainGraphData,Object(k.a)({},e,t))}}))})),a.formRef.current.setFieldsValue({areas:a.state.areas})}))}},{key:"removeAreaByStr",value:function(e){this.setState((function(a){return{areas:a.areas.filter((function(a){return a!==e})),mainGraphData:Object.keys(a.mainGraphData).filter((function(a){return a!==e})).reduce((function(e,t){return Object(E.a)({},e,Object(k.a)({},t,a.mainGraphData[t]))}),{})}}))}},{key:"modelIsSelected",value:function(e){if(this.state.models&&e){var a="".concat(e.name);return this.state.models.includes(a)}return!1}},{key:"onValuesChange",value:function(e,a){var t=this;this.state.dataType;if("socialDistancing"in e&&this.setState({current:a.socialDistancing.includes("current"),worst_effort:a.socialDistancing.includes("worst_effort"),best_effort:a.socialDistancing.includes("best_effort")},(function(){t.reloadAll()})),"models"in e)this.setState({models:e.models},(function(){t.reloadAll()}));else{var r=this.state.areas,n=a.areas,i=n.filter((function(e){return!r.includes(e)})),o=r.filter((function(e){return!n.includes(e)}));i.forEach(this.addAreaByStr),o.forEach(this.removeAreaByStr)}}},{key:"onDaysToPredictChange",value:function(e){var a=this;this.state.areas;this.setState({days:e},(function(){a.reloadAll()}))}},{key:"reloadAll",value:function(){var e=this,a=this.state.areas;this.setState({areas:[],mainGraphData:{}},(function(){a.forEach(e.addAreaByStr),e.state.dynamicMapOn&&0!==e.state.models.length&&e.map.fetchData(e.state.dynamicMapOn)}))}},{key:"switchDynamicMap",value:function(e){this.setState({dynamicMapOn:e}),this.map.fetchData(e)}},{key:"render",value:function(){for(var e=this,a=this.state,t=a.areas,r=a.areasList,i=a.models,o=a.modelsList,s=a.days,c=a.mainGraphData,l=a.dynamicMapOn,u=a.dataType,k=a.statistic,E=a.mapShown,D=a.yScale,C=a.noDataError,O=a.errorDescription,j=this.generateMarks(),_=this.getDaysToFirstDate(),M=r.filter((function(a){return!e.areaIsSelected(a)})).map(W).sort().map((function(e){return n.a.createElement(Q,{key:e}," ",e," ")})),A=o.filter((function(a){return!e.modelIsSelected(a)})).map((function(e){return n.a.createElement(Q,{key:e.name,value:e.name},n.a.createElement(S.a,{title:e.description,placement:"right"},e.name))})),I=n.a.createElement("p",null,'The trend until March 18th has been used as a proxy for "Social distancing off". ',n.a.createElement("br",null),"For modeling details, please see:",n.a.createElement("a",{href:"https://arxiv.org/abs/2004.11372"}," https://arxiv.org/abs/2004.11372"),"."),x="",N="",R=i.length-1;R>=0;R--){if("SI-kJalpha"===i[R].substring(0,10)){x=i[R],0===N.length&&(N=i[R]+" (death prediction)");break}N=i[R]}return n.a.createElement("div",{className:"covid-19-predict"},n.a.createElement(f.a,{type:"flex",justify:"space-around"},n.a.createElement(d.a,{span:10},C?n.a.createElement(b.a,{message:"".concat(O),description:"Please wait for our updates.",type:"error",closable:!0,onClose:this.onAlertClose}):null,n.a.createElement("div",{className:"form-wrapper"},n.a.createElement(y.a,{ref:this.formRef,onValuesChange:this.onValuesChange,initialValues:{areas:t,models:i,days:14,socialDistancing:["current"]}},n.a.createElement(y.a.Item,{label:"Areas",name:"areas",rules:[{required:!0,message:"Please select areas!"}]},n.a.createElement(w.a,{mode:"multiple",style:{width:"100%"},placeholder:"Select Areas"},M)),n.a.createElement(y.a.Item,{label:"Models:",name:"models",rules:[{required:!0,message:"Please select a prediction model!"}]},n.a.createElement(w.a,{mode:"multiple",style:{width:"100%"},placeholder:"Select Prediction Models"},A)),n.a.createElement(y.a.Item,{label:"Date to Predict",name:"days",rules:[{required:!0,message:"Please select number of days!"}]},n.a.createElement(g.a,{marks:j,min:s-30>=-_?s-30:-_,initialValue:s,max:s+50<=99?s+50:99,onAfterChange:this.onDaysToPredictChange,step:null})),n.a.createElement(p.a,{content:I,title:"Social Distancing Clarification",placement:"topLeft"},n.a.createElement(y.a.Item,{label:"Social Distancing",name:"socialDistancing"},n.a.createElement(v.a.Group,{style:{width:"100%"}},n.a.createElement(f.a,null,n.a.createElement(v.a,{defaultChecked:!0,value:"current"},"Current Trend"),n.a.createElement(v.a,{value:"worst_effort"},"Worst Distancing Effort")),n.a.createElement(f.a,null,n.a.createElement(v.a,{value:"best_effort"},"Best Distancing Effort")))))),n.a.createElement("div",null,"Data Type:\xa0\xa0",n.a.createElement(v.a.Group,{defaultValue:["confirmed"],onChange:this.handleDataTypeSelect},n.a.createElement(v.a,{defaultChecked:!0,value:"confirmed"},"Confirmed Cases"),n.a.createElement(v.a,{value:"death"},"Deaths"))),n.a.createElement("br",null),n.a.createElement("div",null,"Statistic:\xa0\xa0",n.a.createElement(m.a.Group,{value:k,onChange:this.handleStatisticSelect},n.a.createElement(m.a,{value:"cumulative"},"Cumulative Cases"),n.a.createElement(m.a,{value:"delta"},"New Cases"))),n.a.createElement("br",null),n.a.createElement("div",null,"Scale:\xa0\xa0",n.a.createElement(m.a.Group,{value:D,onChange:this.handleYScaleSelect},n.a.createElement(m.a,{value:"linear"},"linear"),n.a.createElement(m.a,{value:"log"},"logarithmic"))),n.a.createElement("br",null),n.a.createElement("p",null,"Dynamic Map:\xa0\xa0",n.a.createElement(h.a,{onChange:this.switchDynamicMap})))),n.a.createElement(d.a,{span:14},n.a.createElement("div",{className:"map-wrapper"},n.a.createElement(X,{className:"map",triggerRef:this.bindRef,dynamicMapOn:l,days:s,confirmed_model:x,death_model:N,onMapClick:this.onMapClick,onNoData:this.onNoData,statistic:k,dataType:E}),n.a.createElement(m.a.Group,{value:E,onChange:this.handleMapShownSelect},n.a.createElement(m.a,{value:"confirmed"},"Show Confirmed Cases"),n.a.createElement(m.a,{value:"death"},"Show Deaths"))))),t.length?n.a.createElement(f.a,null,n.a.createElement(d.a,{span:24},n.a.createElement("div",{className:"graph-wrapper"},n.a.createElement(T,{data:c,dataType:u,onNoData:this.onNoData,statistic:k,yScale:D})))):null)}}]),t}(r.PureComponent),Z=(t(882),t(397),function(e){Object(l.a)(t,e);var a=Object(u.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"page-wrapper"},n.a.createElement("div",{className:"article"},n.a.createElement("h1",{className:"article-title"},"ReCOVER: Accurate Predictions and Resource Management for COVID-19 Epidemic Response"),n.a.createElement("p",{className:"article-paragraph"},"Accurate forecasts of COVID-19 is central to resource management and building strategies to deal with the epidemic. This is an NSF-funded project on COVID-19 forecasting led by by ",n.a.createElement("a",{className:"article-anchor",href:"https://sites.usc.edu/prasanna/"}," Viktor K. Prasanna ")," and ",n.a.createElement("a",{className:"article-anchor",href:"http://www-scf.usc.edu/~ajiteshs/"}," Ajitesh Srivastava "),"from the ",n.a.createElement("a",{className:"article-anchor",href:"https://dslab.usc.edu/"}," Data Science Lab ")," at the University of Southern California."),n.a.createElement("h2",null,"Our Approach"),n.a.createElement("p",{className:"article-paragraph"},"We use our own epidemic model called ",n.a.createElement("a",{className:"article-anchor",href:"https://arxiv.org/abs/2007.05180"}," SI-kJalpha"),", preliminary version of which we have successfully used during ",n.a.createElement("a",{className:"article-anchor",href:"https://news.usc.edu/83180/usc-engineers-earn-national-recognition-for-predicting-disease-outbreaks/",target:"_blank"},"DARPA Grand Challenge 2014"),". Our forecast appears on the official ",n.a.createElement("a",{className:"article-anchor",href:"https://www.cdc.gov/coronavirus/2019-ncov/covid-data/forecasting-us.html"}," CDC webpage"),". Our model can consider the effect of many complexities of the epidemic process and yet be simplified to a few parameters that are learned using fast linear regressions. Therefore, our approach can learn and generate forecasts extremely quickly. On a 2 core desktop machine, our approach takes only 3.18s to tune hyper-parameters, learn parameters and generate 100 days of forecasts of reported cases and deaths for all the states in the US. The total execution time for 184 countries is 11.83s and for more than 3000 US counties is 101.03s. Despite being fast, the accuracy of our forecasts is on par with the state-of-the-art as demonstrated on the ",n.a.createElement("a",{className:"article-anchor",href:"https://scc-usc.github.io/ReCOVER-COVID-19/#/leaderboard"}," leaderboard page"),". Details of modeling and comparisons can be found in ",n.a.createElement("a",{className:"article-anchor",href:"https://arxiv.org/abs/2007.05180"}," our paper"),". This work is supported by National Science Foundation Award No. 2027007 (RAPID)"),n.a.createElement("p",{className:"article-paragraph"},"The ",n.a.createElement("a",{className:"article-anchor",href:"https://github.com/scc-usc/ReCOVER-COVID-19",target:"_blank"}," Github repository ")," for this project is publicly available."),n.a.createElement("p",{className:"article-paragraph"},"The matlab code for forecasting is also made available on ",n.a.createElement("a",{className:"article-anchor",href:"https://www.mathworks.com/matlabcentral/fileexchange/75281-recover",target:"_blank"},"File Exchange"),". For the latest code, please see the Github repo."),n.a.createElement("p",{className:"article-paragraph"}," The code of the prediction model and this web application is contributed by Ajitesh Srivastava, Jamin Chen, Frost Tianjian Xu,  and Bob Xiaochen Yang. "),n.a.createElement("h2",null,"Related Papers"),n.a.createElement("ol",{className:"article-paragraph"},n.a.createElement("li",null,"Ajitesh Srivastava, Tianjian Xu and Viktor K. Prasanna,",n.a.createElement("a",{className:"article-anchor",href:"https://arxiv.org/abs/2007.05180",target:"_blank"},' "Fast and Accurate Forecasting of COVID-19 Deaths using the SIkJalpha Model"')," [arXiv]."),n.a.createElement("li",null,"Ajitesh Srivastava and Viktor K. Prasanna,",n.a.createElement("a",{className:"article-anchor",href:"https://arxiv.org/abs/2006.02127",target:"_blank"},' "Data-driven Identification of Number of Unreported Cases for COVID-19: Bounds and Limitations"')," [arXiv]. Accepted at KDD 2020."),n.a.createElement("li",null,"Ajitesh Srivastava and Viktor K. Prasanna,",n.a.createElement("a",{className:"article-anchor",href:"https://arxiv.org/abs/2004.11372",target:"_blank"},' "Learning to Forecast and Forecasting to Learn from the COVID-19 Pandemic"')," [arXiv].")),n.a.createElement("h2",null,"Other Links"),n.a.createElement("ol",{className:"article-paragraph"},n.a.createElement("li",null,n.a.createElement("a",{className:"article-anchor",href:"https://www.youtube.com/watch?v=ll6k8wlxOFo",target:"_blank"},"Webinar ")," describing our intial approach.")),n.a.createElement("h2",null,"USC Data Science Lab"),n.a.createElement("p",{className:"article-paragraph"},"The USC Data Science Lab focuses on applying machine learning, data mining, and network analysis to real-world problems in society and industry. Please find more information and other research projects ",n.a.createElement("a",{className:"article-anchor",href:"https://sites.usc.edu/dslab/",target:"_blank"}," on our website"),".")))}}]),t}(r.Component));var ee=function(e){var a=e.series,t=e.lineGenerator,r=e.xScale,i=e.yScale;return a.map((function(e){var a=e.id,o=e.data,s=e.color,c=e.predicted,l=e.distancing,u={strokeWidth:5};return c&&(u.strokeDasharray=l?"6, 4":"2, 6"),n.a.createElement("path",{key:a,d:t(o.map((function(e){return{x:r(e.data.x),y:i(e.data.y)}}))),fill:"none",stroke:s,style:u})}))},ae={axis:{ticks:{text:{fontSize:18}},legend:{text:{fontSize:18}}},legends:{text:{fontSize:18}}},te=(r.Component,t(104));var re=function(e){Object(l.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(s.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))).parseData=function(e,a){var t=Object.keys(e)[0];if(e[t])return"reproduction"===a?e[t].observed_rt.map((function(a,t){var r={name:a.date.split("-")[1]+"/"+a.date.split("-")[2]};r[Object.keys(e)[0]]=a.value,r["error".concat(Object.keys(e)[0])]=a.conf;for(var n=1;n<Object.keys(e).length;++n)r[Object.keys(e)[n]]=e[Object.keys(e)[n]].observed_rt[t].value,r["error".concat(Object.keys(e)[n])]=e[Object.keys(e)[n]].observed_rt[t].conf;return r})):e[t].observed_mrf.map((function(a,t){var r={name:a.date.split("-")[1]+"/"+a.date.split("-")[2]};r[Object.keys(e)[0]]=a.value,r["error".concat(Object.keys(e)[0])]=a.conf;for(var n=1;n<Object.keys(e).length;++n)r[Object.keys(e)[n]]=e[Object.keys(e)[n]].observed_mrf[t].value,r["error".concat(Object.keys(e)[n])]=e[Object.keys(e)[n]].observed_mrf[t].conf;return r}))},e}return Object(c.a)(t,[{key:"render",value:function(){var e=this.props,a=e.data,t=e.date,r=e.scoreType,i=this.parseData(a,r),o=Object.keys(a),s=[];o.map((function(e,a){var t=function(e){var a=[x.red,x.gold,x.lime,x.cyan,x.geekblue,x.purple,x.magenta];return a[e%a.length]}(a);return s.push(t),0}));for(var c=[],l=0;l<o.length;++l)c.push(n.a.createElement(te.e,{type:"monotone",key:l,dataKey:o[l],stroke:s[l][3],strokeWidth:5},n.a.createElement(te.b,{dataKey:"error".concat(o[l]),width:15,strokeWidth:2,stroke:s[l][6],direction:"y"})));return n.a.createElement(te.f,{width:1400,height:300,data:i,margin:{top:40,right:30,left:40,bottom:5}},n.a.createElement(te.a,{strokeDasharray:"3 3"}),n.a.createElement(te.i,{dataKey:"name"}),n.a.createElement(te.j,null,"reproduction"===r?n.a.createElement(te.c,{value:"Dynamic Reproduction Number",dy:90,position:"insideLeft",angle:-90,fontSize:15}):n.a.createElement(te.c,{value:"MFR Score",dy:45,position:"insideLeft",angle:-90,fontSize:15})),n.a.createElement(te.h,null),n.a.createElement(te.g,{x:t,stroke:"green",strokeWidth:5,fontSize:20,label:{position:"top",value:"selected date",fill:"green",fontSize:15},strokeDasharray:"10 10"}),"reproduction"===r?n.a.createElement(te.g,{y:1,stroke:"SandyBrown",strokeWidth:5,strokeDasharray:"3 3",label:{position:"left",value:"",fill:"red",fontSize:20}}):null,n.a.createElement(te.d,{iconSize:40}),c)}}]),t}(r.Component);F.e(K.a);var ne=function(e){Object(l.a)(t,e);var a=Object(u.a)(t);function t(){var e;return Object(s.a)(this,t),(e=a.call(this)).onShowState=function(a){e.setState({showState:a})},e.modelAPI=new G,e.state={areasList:[],showState:!1,worldSeries:{},usaSeries:{}},e.modelAPI.areas((function(a){return e.setState({areasList:a})})),e}return Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.triggerRef(this)}},{key:"fetchData",value:function(){var e=this,a=arguments,t=this.props.scoreType;a[0]?"reproduction"===t?this.modelAPI.scores_all({weeks:this.props.weeks},(function(t){var r=t.map((function(e){return{id:e.area.iso_2,value:e.value>0?e.value:0,area:e.area}}));a[1]?e.setState({heatmapData:r},e.initChart):e.setState({heatmapData:r},e.updateChart)})):this.modelAPI.all_mrf_scores({weeks:this.props.weeks},(function(t){var r=t.map((function(e){return{id:e.area.iso_2,value:e.value>0?e.value:0,area:e.area}}));a[1]?e.setState({heatmapData:r},e.initChart):e.setState({heatmapData:r},e.updateChart)})):"reproduction"===t?this.modelAPI.scores_all({weeks:this.props.latestWeek},(function(a){var t=a.map((function(e){return{id:e.area.iso_2,value:e.value>0?e.value:0,area:e.area,conf:e.conf}}));e.setState({heatmapData:t},e.initChart)})):this.modelAPI.all_mrf_scores({weeks:this.props.latestWeek},(function(a){var t=a.map((function(e){return{id:e.area.iso_2,value:e.value>0?e.value:0,area:e.area,conf:e.conf}}));e.setState({heatmapData:t},e.initChart)}))}},{key:"initChart",value:function(){this.chart=F.d("chartdiv",U.a),this.chart.projection=new U.d.Mercator;var e=this.chart.series.push(new U.b);e=this.createChartSeries(e,{geodata:H.a,exclude:["AQ"],data:this.state.heatmapData});var a=this.chart.series.push(new U.b);a=this.createChartSeries(a,{geodata:z.a,data:this.state.heatmapData,disabled:!this.state.showState}),this.stateSeries=[a],this.initChartInterface(),this.setState({worldSeries:e,usaSeries:a})}},{key:"updateChart",value:function(){var e=this.state.worldSeries,a=this.state.usaSeries;e.data=this.state.heatmapData,a.data=this.state.heatmapData}},{key:"createChartSeries",value:function(e,a){var t=this.props.scoreType,r=(e=Object.assign(e,a)).mapPolygons.template;"reproduction"===t?e.heatRules.push({property:"fill",target:r,min:F.c("#85DB50"),max:F.c("#F33A21"),minValue:0,maxValue:4}):e.heatRules.push({property:"fill",target:r,min:F.c("#85DB50"),max:F.c("#F33A21"),minValue:0,maxValue:.4}),r.tooltipText="{name}: {value}",r.nonScalingStroke=!0,r.strokeWidth=.5,r.states.create("hover").properties.fill=F.c("#83FE00"),r.cursorOverStyle=F.b.pointer;var n=this.props,i=n.onMapClick,o=n.onNoData;return r.events.on("hit",(function(e){var a=e.target.dataItem.dataContext,t=(a.id,a.value,a.area),r=a.name;t?i(t):o(r)})),e}},{key:"initChartInterface",value:function(){var e=this,a=this.state.showState;this.chart.zoomControl=new U.c,this.chart.zoomControl.cursorOverStyle=F.b.pointer;var t=this.chart.chartContainer.createChild(F.a);t.label.text="".concat(a?"Hide":"Show"," States/Provinces"),t.togglable=!0,t.padding(5,5,5,5),t.align="right",t.marginRight=15,t.cursorOverStyle=F.b.pointer,t.events.on("hit",(function(){e.onShowState(t.isActive);var a=e.state.showState;e.stateSeries.forEach((function(e){return e.disabled=!a})),t.label.text="".concat(a?"Hide":"Show"," States/Provinces")}))}},{key:"componentWillUnmount",value:function(){this.chart&&this.chart.dispose()}},{key:"render",value:function(){return n.a.createElement("div",{id:"chartdiv"})}}]),t}(r.Component),ie=(t(964),w.a.Option),oe=function(e){Object(l.a)(t,e);var a=Object(u.a)(t);function t(e){var r;return Object(s.a)(this,t),(r=a.call(this,e)).componentDidMount=function(){r.formRef=n.a.createRef(),r.modelAPI=new G,r.modelAPI.latest_score_date((function(e){return r.setState({latestDate:e[0].date,weeks:e[0].weeks,latestWeek:e[0].weeks,firstDate:e[0].firstDate},(function(){r.addAreaByStr("US"),r.formRef.current.setFieldsValue({weeks:r.state.latestWeek}),r.map.fetchData(r.state.dynamicMapOn)}))})),r.modelAPI.areas((function(e){return r.setState({areasList:e})}))},r.bindRef=function(e){r.map=e},r.onAlertClose=function(){r.setState({noDataError:!1})},r.onNoData=function(e){r.setState({noDataError:!0,errorDescription:"There is currently no data for ".concat(e)})},r.generateMarks=function(){var e=r.state,a=e.weeks,t=(e.lastDate,e.latestWeek),n=e.firstDate,i=new Date("".concat(n,"T00:00"));i.setDate(i.getDate(Date)+7*a);for(var o={},s=0;s<=5&&a+s<=t;)o[a+s]="".concat(i.getMonth()+1,"/").concat(i.getDate()),i.setDate(i.getDate(Date)+7),s++;for(s=1,(i=new Date("".concat(n,"T00:00"))).setDate(i.getDate(Date)+7*(a-1));s<=5&&a-s>=0;)o[a-s]="".concat(i.getMonth()+1,"/").concat(i.getDate()),i.setDate(i.getDate(Date)-7),s++;return(i=new Date("".concat(n,"T00:00"))).setDate(i.getDate(Date)+7*a),[i,o]},r.handleScoreTypeSelect=function(e){r.setState({scoreType:e.target.value},(function(){r.map.fetchData(r.state.dynamicMapOn,!0)}))},r.state={areas:r.props.areas||[],areasList:[],latestDate:"",firstDate:"",mainGraphData:{},weeks:r.props.weeks||0,latestWeek:0,dynamicMapOn:!1,noDataError:!1,errorDescription:"",scoreType:"reproduction"},r.addAreaByStr=r.addAreaByStr.bind(Object(C.a)(r)),r.removeAreaByStr=r.removeAreaByStr.bind(Object(C.a)(r)),r.onValuesChange=r.onValuesChange.bind(Object(C.a)(r)),r.onMapClick=r.onMapClick.bind(Object(C.a)(r)),r.onWeeksChange=r.onWeeksChange.bind(Object(C.a)(r)),r.switchDynamicMap=r.switchDynamicMap.bind(Object(C.a)(r)),r.onAlertClose=r.onAlertClose.bind(Object(C.a)(r)),r.onNoData=r.onNoData.bind(Object(C.a)(r)),r.generateMarks=r.generateMarks.bind(Object(C.a)(r)),r.handleScoreTypeSelect=r.handleScoreTypeSelect.bind(Object(C.a)(r)),r}return Object(c.a)(t,[{key:"onMapClick",value:function(e){this.areaIsSelected(e)||this.addAreaByStr(W(e))}},{key:"areaIsSelected",value:function(e){if(this.state.areas&&e){var a=W(e);return this.state.areas.includes(a)}return!1}},{key:"addAreaByStr",value:function(e){var a=this,t=B(e);this.setState((function(a){return{areas:[].concat(Object(D.a)(a.areas),[e])}}),(function(){a.modelAPI.scores({state:t.state,country:t.country,weeks:a.state.latestWeek},(function(t){a.setState((function(a){return{mainGraphData:Object(E.a)({},a.mainGraphData,Object(k.a)({},e,t))}}))})),a.formRef.current.setFieldsValue({areas:a.state.areas})}))}},{key:"removeAreaByStr",value:function(e){this.setState((function(a){return{areas:a.areas.filter((function(a){return a!==e})),mainGraphData:Object.keys(a.mainGraphData).filter((function(a){return a!==e})).reduce((function(e,t){return Object(E.a)({},e,Object(k.a)({},t,a.mainGraphData[t]))}),{})}}))}},{key:"onValuesChange",value:function(e,a){var t=this.state.areas,r=a.areas;if(r&&t){var n=r.filter((function(e){return!t.includes(e)})),i=t.filter((function(e){return!r.includes(e)}));n.forEach(this.addAreaByStr),i.forEach(this.removeAreaByStr)}}},{key:"onWeeksChange",value:function(e){var a=this;this.setState({weeks:e},(function(){a.state.dynamicMapOn&&a.map.fetchData(a.state.dynamicMapOn)}))}},{key:"switchDynamicMap",value:function(e){this.setState({dynamicMapOn:e}),this.map.fetchData(e)}},{key:"render",value:function(){var e=this,a=this.state,t=a.areas,r=a.areasList,i=a.weeks,o=a.mainGraphData,s=a.dynamicMapOn,c=a.latestWeek,l=a.noDataError,u=a.errorDescription,p=a.scoreType,v=r.filter((function(a){return!e.areaIsSelected(a)})).map(W).sort().map((function(e){return n.a.createElement(ie,{key:e}," ",e," ")})),S=this.generateMarks(),k=Object(O.a)(S,2),E=k[0],D=k[1],C=E.getMonth()+1<10?"0".concat(E.getMonth()+1):E.getMonth()+1,j=E.getDate()<10?"0".concat(E.getDate()):E.getDate(),_="".concat(C,"/").concat(j);return n.a.createElement("div",{className:"score-page"},n.a.createElement(f.a,{type:"flex",justify:"space-around"},n.a.createElement(d.a,{span:10},l?n.a.createElement(b.a,{message:"".concat(u),description:"Please wait for our updates.",type:"error",closable:!0,onClose:this.onAlertClose}):null,n.a.createElement("div",{className:"form-wrapper"},n.a.createElement(y.a,{ref:this.formRef,onValuesChange:this.onValuesChange},n.a.createElement(y.a.Item,{label:"Areas",name:"areas",rules:[{required:!0,message:"Please select areas!"}]},n.a.createElement(w.a,{mode:"multiple",style:{width:"100%"},placeholder:"Select Areas"},v)),n.a.createElement(y.a.Item,{label:"Week to check",name:"weeks",rules:[{required:!0,message:"Please select the week you want to see"}]},n.a.createElement(g.a,{marks:D,initialValue:i,min:i-5>=0?i-5:0,max:i+5<=c?i+5:c,onAfterChange:this.onWeeksChange}))),n.a.createElement("div",{className:"radio-group"},"Data Type:\xa0\xa0",n.a.createElement(m.a.Group,{value:p,onChange:this.handleScoreTypeSelect},n.a.createElement(m.a,{value:"reproduction"},"Dynamic Reproduction Number"),n.a.createElement(m.a,{value:"mfr"},"Model-based Fatality Rate"))),n.a.createElement("p",null,"Dynamic Map:\xa0\xa0",n.a.createElement(h.a,{onChange:this.switchDynamicMap})))),n.a.createElement(d.a,{span:14},n.a.createElement("div",{className:"map-wrapper"},n.a.createElement(ne,{className:"score-map",triggerRef:this.bindRef,dynamicMapOn:s,weeks:i,latestWeek:c,onMapClick:this.onMapClick,onNoData:this.onNoData,scoreType:p})))),t.length?n.a.createElement(f.a,null,n.a.createElement(d.a,{span:24},n.a.createElement("div",{className:"graph-wrapper"},n.a.createElement(re,{data:o,date:_,scoreType:p})))):null)}}]),t}(r.PureComponent),se=t(573),ce=t(66),le=(t(965),t(198)),ue=(t(967),function(e){Object(l.a)(t,e);var a=Object(u.a)(t);function t(e){var r;return Object(s.a)(this,t),(r=a.call(this,e)).handleItemClick=function(e){var a=r.props,t=a.redirectForecast,n=a.redirectAbout,i=a.redirectScore,o=a.redirectLeaderboard,s=a.redirectHighlights,c=e.key;r.setState({activeItem:e.key}),"forecast"===c?t():"information"===c?n():"quarantine-score"===c?i():"leaderboard"===c?o():"highlights"===c&&s()},r.state={activateItem:"forecast"},r}return Object(c.a)(t,[{key:"render",value:function(){var e=window.location.href;return n.a.createElement(f.a,{className:"navbar-container"},n.a.createElement(d.a,null,n.a.createElement("img",{className:"logo",src:"https://identity.usc.edu/files/2011/12/combo_gold_white_cardinal.png",alt:"USC"})),n.a.createElement(d.a,null,n.a.createElement(le.a,{theme:"light",mode:"horizontal",onClick:this.handleItemClick,defaultSelectedKeys:e.includes("score")?["quarantine-score"]:e.includes("about")?["information"]:e.includes("leaderboard")?["leaderboard"]:e.includes("highlights")?["highlights"]:["forecast"]},n.a.createElement(le.a.Item,{key:"forecast"},"COVID-19 Forecast"),n.a.createElement(le.a.Item,{key:"quarantine-score"},"Reproduction Number"),n.a.createElement(le.a.Item,{key:"highlights"},"Highlights"),n.a.createElement(le.a.Item,{key:"leaderboard"},"Leaderboard"),n.a.createElement(le.a.Item,{key:"information"},"About Us"))))}}]),t}(r.Component)),de=(t(974),t(1044),t(199)),he=(t(978),t(568)),me=(t(980),t(981),t(982),t(983),t(567)),pe=t.n(me),fe={jhu:{runningAvgRankings:[{model:{name:"SIkJa_USC",description:"This is our SI-kJalpha model.",link:"https://scc-usc.github.io/ReCOVER-COVID-19/"},RMSE:38.93},{model:{name:"YYG_ParamSearch",description:"Based on the SEIR model to make daily projections regarding COVID-19 infections and deaths in 50 US states. The model's contributor is Youyang Gu.",link:"http://covid19-projections.com/about/"},RMSE:39.17},{model:{name:"Covid19Sim_Simulator",description:"An interactive tool developed by researchers at Mass General Hospital, Harvard Medical School, Georgia Tech and Boston Medical Center.",link:"https://covid19sim.org/"},RMSE:55.51},{model:{name:"UCLA_SuEIR",description:"SEIR model by UCLA Statistical Machine Learning Lab.",link:"https://covid19.uclaml.org/"},RMSE:69.87},{model:{name:"CU_select",description:"A metapopulation county-level SEIR model by Columbia University.",link:"https://blogs.cuit.columbia.edu/jls106/publications/covid-19-findings-simulations/"},RMSE:78.26},{model:{name:"JHU_IDD_CovidSP",description:"County-level metapopulation model by Johns Hopkins ID Dynamics COVID-19 Working Group.",link:"https://github.com/HopkinsIDD/COVIDScenarioPipeline"},RMSE:96.49},{model:{name:"IowaStateLW_STEM",description:"A COVID19 forecast project led by Lily Wang in Iowa State University.",link:"https://covid19.stat.iastate.edu"},RMSE:98.01},{model:{name:"CovidActNow_SEIR_CAN",description:"SEIR model by the CovidActNow research team.",link:"https://covidactnow.org/"},RMSE:111.19}],recentRankings:[{model:{name:"SIkJa_USC",description:"This is our SI-kJalpha model.",link:"https://scc-usc.github.io/ReCOVER-COVID-19/"},RMSE:42.01},{model:{name:"YYG_ParamSearch",description:"Based on the SEIR model to make daily projections regarding COVID-19 infections and deaths in 50 US states. The model's contributor is Youyang Gu.",link:"http://covid19-projections.com/about/"},RMSE:44.7},{model:{name:"UCLA_SuEIR",description:"SEIR model by UCLA Statistical Machine Learning Lab.",link:"https://covid19.uclaml.org/"},RMSE:56.28},{model:{name:"Covid19Sim_Simulator",description:"An interactive tool developed by researchers at Mass General Hospital, Harvard Medical School, Georgia Tech and Boston Medical Center.",link:"https://covid19sim.org/"},RMSE:59.59},{model:{name:"JHU_IDD_CovidSP",description:"County-level metapopulation model by Johns Hopkins ID Dynamics COVID-19 Working Group.",link:"https://github.com/HopkinsIDD/COVIDScenarioPipeline"},RMSE:64.11},{model:{name:"CU_select",description:"A metapopulation county-level SEIR model by Columbia University.",link:"https://blogs.cuit.columbia.edu/jls106/publications/covid-19-findings-simulations/"},RMSE:65.45},{model:{name:"IowaStateLW_STEM",description:"A COVID19 forecast project led by Lily Wang in Iowa State University.",link:"https://covid19.stat.iastate.edu"},RMSE:71.28},{model:{name:"CovidActNow_SEIR_CAN",description:"SEIR model by the CovidActNow research team.",link:"https://covidactnow.org/"},RMSE:NaN}]}},ve=function(e){Object(l.a)(t,e);var a=Object(u.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"getAvatar",value:function(e){var a="";switch(e){case 1:a="https://img.icons8.com/officel/80/000000/medal2.png";break;case 2:a="https://img.icons8.com/officel/80/000000/medal-second-place.png";break;case 3:a="https://img.icons8.com/officel/80/000000/medal2-third-place.png";break;default:a="https://img.icons8.com/carbon-copy/100/000000/"+e+"-circle.png"}return n.a.createElement(he.a,{className:"rank-number",src:a,alt:""})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"page-wrapper"},n.a.createElement("div",{className:"grid"},n.a.createElement(f.a,null,n.a.createElement(d.a,{span:12},n.a.createElement("h2",{className:"title"},"Running Average Performance"),n.a.createElement(de.a,{className:"leaderboard",itemLayout:"horizontal",dataSource:fe.jhu.runningAvgRankings,renderItem:function(a){return n.a.createElement(de.a.Item,null,n.a.createElement(de.a.Item.Meta,{avatar:e.getAvatar(fe.jhu.runningAvgRankings.indexOf(a)+1),title:n.a.createElement("a",{className:"model-name",href:a.model.link},a.model.name),description:a.model.description}),n.a.createElement("div",{className:"content"},n.a.createElement("span",null,"RMSE: ",n.a.createElement("span",{className:"score"},a.RMSE))))}})),n.a.createElement(d.a,{span:12},n.a.createElement("h2",{className:"title"},"Recent Performance (from 2020-07-18)"),n.a.createElement(de.a,{className:"leaderboard",itemLayout:"horizontal",dataSource:fe.jhu.recentRankings,renderItem:function(a){return n.a.createElement(de.a.Item,null,n.a.createElement(de.a.Item.Meta,{avatar:e.getAvatar(fe.jhu.recentRankings.indexOf(a)+1),title:n.a.createElement("a",{className:"model-name",href:a.model.link},a.model.name),description:a.model.description}),n.a.createElement("div",{className:"content"},n.a.createElement("span",null,"RMSE: ",n.a.createElement("span",{className:"score"},a.RMSE))))}}))),n.a.createElement(f.a,null,n.a.createElement("div",{className:"main-graph-container"},n.a.createElement("img",{className:"graph",src:pe.a}))),n.a.createElement("p",{className:"clarification"},n.a.createElement("b",null,"Evaluation method:")," We have recently moved the evaluation to JHU dataset only as majority of the forecasting teams are now using it. ",n.a.createElement("br",null),"Our forecasts used here are taken from the our ",n.a.createElement("a",{href:"https://github.com/scc-usc/ReCOVER-COVID-19/tree/master/results/forecasts"}," github repo "),". The chosen evaluation metric is Root Mean Squared Error (RMSE) of weekly new deaths computed ",n.a.createElement("br",null),"over the next two weeks from the day of the forecasts. ",n.a.createElement("br",null),"Please contact us at ",n.a.createElement("a",{className:"article-anchor",href:"mailto:ajiteshs@usc.edu"},"ajiteshs@usc.edu"),"to add your model to the leaderboard."),n.a.createElement("p",{className:"disclaimer"},n.a.createElement("b",null,"Disclaimer:")," The above Covid-19 forecast reports may have copyright restrictions. You may visit the website of their original work by clicking on their model names. ",n.a.createElement("br",null),"All credits for predictions go to the respective owners of the forecast reports. The ReCover-Covid-19 website does not hold responsibility or liability for prediction accuracy of prediction reports that are not generated by USC Data Science lab.")))}}]),t}(r.Component),ge=t(271),ye=(t(1028),t(571));function be(e){var a=Object(r.useState)(null),t=Object(O.a)(a,2),i=t[0],o=t[1];function s(e){var a=e.numPages;o(a),document.querySelectorAll(".react-pdf__Page__textContent").forEach((function(e){var a=e.style;a.top="0",a.left="0",a.transform=""}))}var c=e.pdf;return n.a.createElement(ye.SizeMe,{monitorHeight:!0,refreshRate:128,refreshMode:"debounce",render:function(e){var a=e.size;return n.a.createElement("div",null,n.a.createElement(ge.Document,{file:c,options:{workerSrc:"pdf.worker.js"},onLoadSuccess:s},Array.from(new Array(i),(function(e,t){return n.a.createElement(ge.Page,{width:a.width,key:"page_".concat(t+1),pageNumber:t+1})}))))}})}ge.pdfjs.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(ge.pdfjs.version,"/pdf.worker.js");var Se=t(572),ke=t.n(Se),Ee=function(e){Object(l.a)(t,e);var a=Object(u.a)(t);function t(e){var r;return Object(s.a)(this,t),(r=a.call(this,e)).redirectForecast=function(){r.setState({redirectForecast:!0,redirectAbout:!1,redirectScore:!1,redirectLeaderboard:!1,redirectHighlights:!1})},r.redirectAbout=function(){r.setState({redirectForecast:!1,redirectAbout:!0,redirectScore:!1,redirectLeaderboard:!1,redirectHighlights:!1})},r.redirectScore=function(){r.setState({redirectForecast:!1,redirectAbout:!1,redirectScore:!0,redirectHighlights:!1,redirectLeaderboard:!1})},r.redirectLeaderboard=function(){r.setState({redirectForecast:!1,redirectAbout:!1,redirectScore:!1,redirectLeaderboard:!0,redirectHighlights:!1})},r.redirectHighlights=function(){r.setState({redirectForecast:!1,redirectAbout:!1,redirectScore:!1,redirectLeaderboard:!1,redirectHighlights:!0})},r.state={redirectForecast:!1,redirectAbout:!1,redirectScore:!1,redirectLeaderboard:!1,redirectHighlights:!1},r}return Object(c.a)(t,[{key:"render",value:function(){var e=this.state,a=e.redirectForecast,t=e.redirectAbout,r=e.redirectScore,i=e.redirectLeaderboard,o=e.redirectHighlights;return n.a.createElement(se.a,{basename:"/"},a?n.a.createElement(ce.a,{to:"/"}):null,o?n.a.createElement(ce.a,{to:"/highlights"}):null,r?n.a.createElement(ce.a,{to:"/score"}):null,t?n.a.createElement(ce.a,{to:"/about"}):null,i?n.a.createElement(ce.a,{to:"/leaderboard"}):null,n.a.createElement(ue,{redirectForecast:this.redirectForecast,redirectHighlights:this.redirectHighlights,redirectScore:this.redirectScore,redirectAbout:this.redirectAbout,redirectLeaderboard:this.redirectLeaderboard}),n.a.createElement(ce.d,null,n.a.createElement(ce.b,{exact:!0,path:"/",render:function(e){return n.a.createElement($,e)}}),n.a.createElement(ce.b,{exact:!0,path:"/score",render:function(e){return n.a.createElement(oe,e)}}),n.a.createElement(ce.b,{exact:!0,path:"/about",render:function(e){return n.a.createElement(Z,e)}}),n.a.createElement(ce.b,{exact:!0,path:"/leaderboard",render:function(e){return n.a.createElement(ve,e)}}),n.a.createElement(ce.b,{exact:!0,path:"/highlights"},n.a.createElement(be,{pdf:ke.a}))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(Ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},301:function(e,a){function t(e){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=301},397:function(e,a,t){},567:function(e,a,t){e.exports=t.p+"static/media/all_graph.e30fa474.png"},572:function(e,a,t){e.exports=t.p+"static/media/highlights.70f92ccd.pdf"},637:function(e,a,t){e.exports=t(1043)},642:function(e,a,t){},795:function(e,a,t){},882:function(e,a,t){},964:function(e,a,t){},967:function(e,a,t){},980:function(e,a,t){},981:function(e,a,t){e.exports=t.p+"static/media/nyt_graph.b82f8664.png"},982:function(e,a,t){e.exports=t.p+"static/media/jhu_graph.39518de8.png"},983:function(e,a,t){e.exports=t.p+"static/media/usf_graph.35c9b379.png"},991:function(e,a){},993:function(e,a){},994:function(e,a){},995:function(e,a){},996:function(e,a){}},[[637,1,3]]]);
//# sourceMappingURL=main.9a7c259a.chunk.js.map